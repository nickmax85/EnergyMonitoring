<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>

    <script src="Scripts/jquery-3.4.1.js"></script>
    <link href="Content/bootstrap.css" rel="stylesheet" />
</head>
<body class="container">
    <h1>test</h1>

    <ul id="devices" class="list-group">
    </ul>

    <button class="btn btn-info" id="addButton">Add</button>
    <button class="btn btn-warning" id="refreshButton">Refresh</button>
    <button class="btn btn-danger" id="deleteButton">Delete</button>


    <script>

        $(document).ready(function () {


            test();

            getJQuery();

            $('#refreshButton').click(function () {

                //getJQuery();

            });



            $('#addButton').click(function () {



            });

            $('#deleteButton').click(function () {


            });


        });


        function test() {
            let container = $('#devices');
            container.empty();

            let label = $('<label>').html('Label 1');
            let label2 = $('<label>').html('Label 2');
            let button = $('<button>');


            container.append(label);
            container.append(label2);
            container.append(button);

        }

        function getJQuery() {


            let url = '/api/devices';
            $.getJSON(url)
                .done(function (data) {
                    // let data = JSON.parse(ddata.d);
                    //debugger;
                    //showData(data);

                })
                .fail(function (error) {
                    alert("ERROR: " + error.status + ' ' + error.statusText);
                });

        }



        function showData(data) {

            let container = $('#devices');
            container.empty();

            if (!Array.isArray(data))
                return;

            data.forEach(function (item, i) {

                let li = $('<li class="list-group-item">');

                let label = $('<label>').html(item.Equipment.Location.Name + "; " + item.Equipment.Name + "; " +
                    item.Name + ";");


                let ipLabel = $('<label>').html(item.IP).append('&nbsp;<a href=http://' + item.IP + '></a>').text('Your new text');
                // ipLabel.append('&nbsp;<a href="foo.html">?</a>');
                ipLabel.append('&nbsp;<a href=http://' + item.IP + '></a>');

                let button = $('<button class="btn btn-info" name="1234">').click(function () {
                    window.location = "http://" + item.IP;
                }).html('open device');

                li.append(label);
                li.append(ipLabel);
                li.append(button);

                container.append(li);
            });
        }



    </script>


</body>
</html>