<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>

    <script src="Scripts/jquery-3.4.1.js"></script>
    <link href="Content/bootstrap.css" rel="stylesheet" />
</head>
<body class="container">
    <h1>EnergyMonitoring</h1>

    <ul id="devices" class="list-group">
    </ul>

    <button class="btn btn-info" id="addButton">Add</button>
    <button class="btn btn-warning" id="refreshButton">Refresh</button>
    <button class="btn btn-danger" id="deleteButton">Delete</button>

    <script>

        $(document).ready(function () {


            getJQuery();

            $('#refreshButton').click(function () {

                getJQuery();

            });



            $('#addButton').click(function () {



            });

            $('#deleteButton').click(function () {


            });


        });

        function getJQuery() {


            let url = '/api/devices';
            $.getJSON(url)
                .done(function (data) {
                    // let data = JSON.parse(ddata.d);
                    //debugger;
                    showData(data);

                })
                .fail(function (error) {
                    alert("ERROR: " + error.status + ' ' + error.statusText);
                });

        }



        function showData(data) {

            let container = $('#devices');
            container.empty();

            if (!Array.isArray(data))
                return;

            data.forEach(function (item, i) {

                let li = $('<li class="list-group-item">');
                let label = $('<label>').html(item.Equipment.Location.Name + "; " + item.Equipment.Name + "; " +
                    item.Name + "; " + item.IP);
                li.append(label);
                container.append(li);
            });
        }



    </script>


</body>
</html>